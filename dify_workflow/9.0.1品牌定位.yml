app:
  description: å“ç‰Œå®šä½
  icon: ğŸ“‹
  icon_background: '#D5F5F6'
  mode: workflow
  name: 9.0.1å“ç‰Œå®šä½
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.3@08f25a10c0617a3512fac091a0f0d894925357e965efe40fdf95cb48e09b62d1
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: start
        targetType: llm
      id: edge-start-to-llm
      source: start
      sourceHandle: source
      target: llm-analysis
      targetHandle: target
      type: custom
    - data:
        sourceType: llm
        targetType: code
      id: edge-llm-to-json
      source: llm-analysis
      sourceHandle: source
      target: code-json
      targetHandle: target
      type: custom
    - data:
        sourceType: code
        targetType: http-request
      id: edge-json-to-http
      source: code-json
      sourceHandle: source
      target: http-save
      targetHandle: target
      type: custom
    - data:
        sourceType: http-request
        targetType: end
      id: edge-http-to-end
      source: http-save
      sourceHandle: source
      target: end
      targetHandle: target
      type: custom
    nodes:
    - data:
        desc: è¾“å…¥äº§å“å’Œä¼ä¸šä¿¡æ¯
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: äº§å“å
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_product_id_name
        - label: äº§å“ç®€ä»‹
          max_length: 256
          options: []
          required: true
          type: paragraph
          variable: e_product_id_detail
        - label: å“ç‰Œåºå·
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: brand_id
        - label: ä¼ä¸šå
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_name
        - label: ä¼ä¸šå¹´æ”¶å…¥
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_revenue
        - label: å“ç‰Œå»ºè®¾ç»“æœ
          max_length: 8192
          options: []
          required: true
          type: paragraph
          variable: brand_building_result
        - label: ç”¨æˆ·id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_id
        - label: ç§Ÿæˆ·id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: tenant_id
        - label: ä»»åŠ¡id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: taskId
      height: 324
      id: start
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: å“ç‰Œå®šä½ç­–ç•¥
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen3-max
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: prompt-system
          role: system
          text: "è¯·ä½ ä½œä¸ºä¸€åä¸“ä¸šçš„å“ç‰Œå®šä½ä¸“å®¶ï¼Œå¸®åŠ©åˆ¶å®šæ¸…æ™°çš„å“ç‰Œå®šä½ç­–ç•¥ï¼š\n\n1. å¸‚åœºåˆ†æï¼š\n   - ç›®æ ‡å¸‚åœºè§„æ¨¡ä¸å¢é•¿è¶‹åŠ¿\n  \
            \ - ä¸»è¦ç«äº‰å¯¹æ‰‹åŠå…¶å®šä½\n   - å¸‚åœºç©ºç™½ç‚¹ä¸æœºä¼šè¯†åˆ«\n\n2. ç›®æ ‡å®¢æˆ·ç”»åƒï¼š\n   - æ ¸å¿ƒç›®æ ‡å®¢æˆ·ç¾¤ä½“ç‰¹å¾\n   - å®¢æˆ·ç—›ç‚¹ä¸éœ€æ±‚åˆ†æ\n\
            \   - å®¢æˆ·å†³ç­–å› ç´ ä¸è´­ä¹°åŠ¨æœº\n\n3. å“ç‰Œå®šä½ç­–ç•¥ï¼š\n   - å“ç‰Œæ ¸å¿ƒä»·å€¼ä¸»å¼ ï¼ˆUSPï¼‰\n   - å“ç‰Œä¸ªæ€§ä¸è°ƒæ€§å®šä¹‰\n\
            \   - å·®å¼‚åŒ–ç«äº‰ä¼˜åŠ¿\n   - å“ç‰Œæ‰¿è¯ºä¸åˆ©ç›Šç‚¹\n\n4. å®šä½è¡¨è¾¾ï¼š\n   - å“ç‰Œå®šä½è¯­ï¼ˆPositioning Statementï¼‰\n\
            \   - å“ç‰Œå£å·ï¼ˆSloganï¼‰å»ºè®®\n   - å…³é”®ä¿¡æ¯æ¶æ„\n\nè¾“å‡ºJSONæ ¼å¼ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n{\n  \"brandId\"\
            : \"å“ç‰Œåºå·\",\n  \"workflowTaskId\": \"ä»»åŠ¡ID\",\n  \"marketAnalysis\": {\"\
            size\": \"å¸‚åœºè§„æ¨¡\", \"growth\": \"å¢é•¿è¶‹åŠ¿\", \"gaps\": [\"æœºä¼š1\"]},\n  \"targetCustomer\"\
            : {\"profile\": \"ç”»åƒæè¿°\", \"painPoints\": [\"ç—›ç‚¹1\"], \"motivations\":\
            \ [\"åŠ¨æœº1\"]},\n  \"positioningStrategy\": {\"usp\": \"æ ¸å¿ƒä»·å€¼ä¸»å¼ \", \"personality\"\
            : \"å“ç‰Œä¸ªæ€§\", \"differentiation\": \"å·®å¼‚åŒ–ä¼˜åŠ¿\"},\n  \"positioningStatement\"\
            : \"å“ç‰Œå®šä½è¯­\",\n  \"sloganSuggestions\": [\"å£å·1\", \"å£å·2\"]\n}\n"
        - id: prompt-user
          role: user
          text: 'ä»¥ä¸‹æ˜¯ä¼ä¸šå’Œäº§å“ä¿¡æ¯ï¼š

            - äº§å“åç§°ï¼š{{#start.e_product_id_name#}}

            - ä¼ä¸šåç§°ï¼š{{#start.e_company_name#}}

            - ä¼ä¸šå¹´è¥æ”¶è§„æ¨¡ï¼š{{#start.e_company_revenue#}}å…ƒ

            - äº§å“ä¸»è¦åŠŸèƒ½ï¼š{{#start.e_product_id_detail#}}

            - å“ç‰Œåºå·ï¼š{{#start.brand_id#}}

            - ä»»åŠ¡IDï¼š{{#start.taskId#}}


            ã€å“ç‰Œå»ºè®¾æ•´ä½“è§„åˆ’ï¼ˆæ¥è‡ª9.0.0ï¼‰ã€‘ï¼š

            {{#start.brand_building_result#}}


            è¯·åŸºäºä»¥ä¸Šå“ç‰Œå»ºè®¾è§„åˆ’ï¼Œåˆ¶å®šè¯¥äº§å“çš„å“ç‰Œå®šä½ç­–ç•¥ï¼ŒåŠ¡å¿…åœ¨è¾“å‡ºä¸­åŒ…å« brandId å’Œ workflowTaskId å­—æ®µã€‚

            '
        selected: false
        structured_output:
          schema:
            properties:
              brandId:
                description: å“ç‰Œåºå·
                type: string
              marketAnalysis:
                properties:
                  gaps:
                    items:
                      type: string
                    type: array
                  growth:
                    type: string
                  size:
                    type: string
                type: object
              positioningStatement:
                type: string
              positioningStrategy:
                properties:
                  differentiation:
                    type: string
                  personality:
                    type: string
                  usp:
                    type: string
                type: object
              sloganSuggestions:
                items:
                  type: string
                type: array
              targetCustomer:
                properties:
                  motivations:
                    items:
                      type: string
                    type: array
                  painPoints:
                    items:
                      type: string
                    type: array
                  profile:
                    type: string
                type: object
              workflowTaskId:
                description: ä»»åŠ¡ID
                type: string
            required:
            - brandId
            - workflowTaskId
            - marketAnalysis
            - targetCustomer
            - positioningStrategy
            - positioningStatement
            - sloganSuggestions
            type: object
        structured_output_enabled: true
        title: å“ç‰Œå®šä½
        type: llm
        variables: []
        vision:
          enabled: false
      height: 116
      id: llm-analysis
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        code: "import json\ndef main(marketAnalysis: dict, targetCustomer: dict, positioningStrategy:\
          \ dict, sloganSuggestions: list) -> dict:\n    result = {}\n    try:\n \
          \       result[\"marketAnalysis\"] = json.dumps(marketAnalysis, ensure_ascii=False,\
          \ separators=(',', ':'))\n        result[\"targetCustomer\"] = json.dumps(targetCustomer,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"positioningStrategy\"\
          ] = json.dumps(positioningStrategy, ensure_ascii=False, separators=(',',\
          \ ':'))\n        result[\"sloganSuggestions\"] = json.dumps(sloganSuggestions,\
          \ ensure_ascii=False, separators=(',', ':'))\n    except Exception as e:\n\
          \        pass\n    return result\n"
        code_language: python3
        desc: å°†å¤æ‚å­—æ®µè½¬ä¸ºJSONå­—ç¬¦ä¸²
        outputs:
          marketAnalysis:
            children: null
            type: string
          positioningStrategy:
            children: null
            type: string
          sloganSuggestions:
            children: null
            type: string
          targetCustomer:
            children: null
            type: string
        selected: false
        title: è½¬JSON
        type: code
        variables:
        - value_selector:
          - llm-analysis
          - structured_output
          - marketAnalysis
          value_type: object
          variable: marketAnalysis
        - value_selector:
          - llm-analysis
          - structured_output
          - targetCustomer
          value_type: object
          variable: targetCustomer
        - value_selector:
          - llm-analysis
          - structured_output
          - positioningStrategy
          value_type: object
          variable: positioningStrategy
        - value_selector:
          - llm-analysis
          - structured_output
          - sloganSuggestions
          value_type: array[string]
          variable: sloganSuggestions
      height: 80
      id: code-json
      position:
        x: 688
        y: 282
      positionAbsolute:
        x: 688
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        authorization:
          type: no-auth
        body:
          data:
          - id: key-value-1
            key: ''
            type: text
            value: "{\n  \"brandId\":\"{{#start.brand_id#}}\",\n  \"workflowTaskId\"\
              :\"{{#start.taskId#}}\",\n  \"marketAnalysis\":{{#code-json.marketAnalysis#}},\n\
              \  \"targetCustomer\":{{#code-json.targetCustomer#}},\n  \"positioningStrategy\"\
              :{{#code-json.positioningStrategy#}},\n  \"positioningStatement\":\"\
              {{#llm-analysis.structured_output.positioningStatement#}}\",\n  \"sloganSuggestions\"\
              :{{#code-json.sloganSuggestions#}}\n}"
          type: json
        desc: ä¿å­˜å“ç‰Œå®šä½ç»“æœåˆ°åç«¯
        headers: 'Authorization:test{{#start.user_id#}}

          tenant-id:{{#start.tenant_id#}}'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: true
        ssl_verify: true
        timeout:
          connect: 10
          read: 60
          write: 60
        title: ä¿å­˜åˆ°åç«¯
        type: http-request
        url: https://agent.cstlanbaai.com/gateway/admin-api/scrm/brand-positioning-result/create
      height: 198
      id: http-save
      position:
        x: 992
        y: 282
      positionAbsolute:
        x: 992
        y: 282
      selected: true
      type: custom
      width: 242
    - data:
        desc: è¾“å‡ºç»“æœ
        outputs:
        - value_selector:
          - llm-analysis
          - text
          variable: brand_positioning_result
        selected: false
        title: ç»“æŸ
        type: end
      height: 116
      id: end
      position:
        x: 1296
        y: 282
      positionAbsolute:
        x: 1296
        y: 282
      selected: false
      type: custom
      width: 242
    viewport:
      x: 0
      y: 0
      zoom: 1
  rag_pipeline_variables: []
