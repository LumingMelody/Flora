app:
  description: ÂÅ•Â∫∑Â∫¶ÊåáÊ†á‰ΩìÁ≥ªËÆæËÆ°ÊµÅÁ®ã
  icon: üìä
  icon_background: '#D5F5F6'
  mode: workflow
  name: 7.0.1ÂÅ•Â∫∑Â∫¶ÊåáÊ†á‰ΩìÁ≥ªËÆæËÆ°ÊµÅÁ®ã
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.3@08f25a10c0617a3512fac091a0f0d894925357e965efe40fdf95cb48e09b62d1
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: http-request
        targetType: end
      id: edge-http-to-end
      source: http-save
      sourceHandle: source
      target: end
      targetHandle: target
      type: custom
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-source-1765267713296-target
      source: start
      sourceHandle: source
      target: '1765267713296'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1765267713296-source-1765268495197-target
      source: '1765267713296'
      sourceHandle: source
      target: '1765268495197'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1765268495197-source-http-save-target
      source: '1765268495197'
      sourceHandle: source
      target: http-save
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ËæìÂÖ•‰∫ßÂìÅ‰ø°ÊÅØ
        selected: false
        title: ÂºÄÂßã
        type: start
        variables:
        - label: ‰∫ßÂìÅÂêç
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_product_id_name
        - label: ‰∫ßÂìÅÁÆÄ‰ªã
          max_length: 256
          options: []
          required: true
          type: paragraph
          variable: e_product_id_detail
        - label: ‰∫ßÂìÅÂ∫èÂè∑
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_product_id
        - label: ‰ºÅ‰∏öÂêç
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_name
        - label: ‰ºÅ‰∏öÂπ¥Êî∂ÂÖ•
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_revenue
        - label: Áî®Êà∑id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_id
        - label: ÁßüÊà∑id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: tenant_id
        - label: ‰ªªÂä°id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: taskId
      height: 298
      id: start
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        authorization:
          type: no-auth
        body:
          data:
          - id: key-value-1
            key: ''
            type: text
            value: "{\n  \"productId\":\"{{#start.e_product_id#}}\",\n  \"workflowTaskId\"\
              :\"{{#start.taskId#}}\",\n  \"usageDimension\":\"{{#1765268495197.usageDimension#}}\"\
              ,\n  \"valueDimension\":\"{{#1765268495197.valueDimension#}}\",\n  \"\
              satisfactionDimension\":\"{{#1765268495197.satisfactionDimension#}}\"\
              ,\n  \"relationshipDimension\":\"{{#1765268495197.relationshipDimension#}}\"\
              ,\n  \"commercialDimension\":\"{{#1765268495197.commercialDimension#}}\"\
              ,\n  \"metricsDefinition\":\"{{#1765268495197.metricsDefinition#}}\"\
              ,\n  \"dimensionWeights\":\"{{#1765268495197.dimensionWeights#}}\",\n\
              \  \"levelThresholds\":\"{{#1765268495197.levelThresholds#}}\",\n  \"\
              metricThresholds\":\"{{#1765268495197.metricThresholds#}}\"\n}"
          type: json
        desc: ‰øùÂ≠òÂÅ•Â∫∑Â∫¶ÊåáÊ†á‰ΩìÁ≥ªËÆæËÆ°ÁªìÊûúÂà∞ÂêéÁ´Ø
        headers: 'Authorization:test{{#start.user_id#}}

          tenant-id:{{#start.tenant_id#}}'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          connect: 10
          read: 60
          write: 60
        title: ‰øùÂ≠òÂà∞ÂêéÁ´Ø
        type: http-request
        url: https://agent.cstlanbaai.com/gateway/admin-api/scrm/health-metrics-design/create
      height: 198
      id: http-save
      position:
        x: 933.6850616648753
        y: 282
      positionAbsolute:
        x: 933.6850616648753
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        desc: ËæìÂá∫ÁªìÊûú
        outputs:
        - value_selector:
          - http-save
          - body
          value_type: string
          variable: metrics_design_result
        selected: false
        title: ÁªìÊùü
        type: end
      height: 116
      id: end
      position:
        x: 1202.9216170402858
        y: 282
      positionAbsolute:
        x: 1202.9216170402858
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen3-max
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: 5be1b20a-1331-4516-ab1f-0d9fe5e2c7d7
          role: system
          text: 'ËØ∑‰Ω†‰Ωú‰∏∫‰∏ÄÂêç‰∏ì‰∏öÁöÑÂÆ¢Êà∑ÊàêÂäüÊåáÊ†á‰ΩìÁ≥ªËÆæËÆ°‰∏ìÂÆ∂ÔºåÂ∏ÆÂä©ËÆæËÆ°ÂÆåÊï¥ÁöÑÂÆ¢Êà∑ÂÅ•Â∫∑Â∫¶ÊåáÊ†á‰ΩìÁ≥ªÔºö


            „Äê‰∏Ä„ÄÅÁ°ÆÂÆöÂÅ•Â∫∑Â∫¶Áª¥Â∫¶„Äë

            1. ‰∫ßÂìÅ‰ΩøÁî®Áª¥Â∫¶ÔºöÊ¥ªË∑ÉÂ∫¶ÊåáÊ†á„ÄÅÊ∑±Â∫¶‰ΩøÁî®ÊåáÊ†á„ÄÅ‰ΩøÁî®ÂπøÂ∫¶ÊåáÊ†á

            2. ‰∏öÂä°‰ª∑ÂÄºÁª¥Â∫¶ÔºöÁõÆÊ†áËææÊàêÁéá„ÄÅROIÊåáÊ†á„ÄÅ‰∏öÂä°‰∫ßÂá∫

            3. ÂÆ¢Êà∑Êª°ÊÑèÂ∫¶Áª¥Â∫¶ÔºöNPSËØÑÂàÜ„ÄÅCSATËØÑÂàÜ„ÄÅÊîØÊåÅ‰ΩìÈ™å

            4. ÂÖ≥Á≥ªÂÅ•Â∫∑Â∫¶Áª¥Â∫¶ÔºöÊ≤üÈÄöÈ¢ëÊ¨°„ÄÅÂìçÂ∫îÂèäÊó∂ÊÄß„ÄÅÂÖ≥ÈîÆ‰∫∫Á®≥ÂÆöÊÄß

            5. ÂïÜ‰∏öÂÅ•Â∫∑Â∫¶Áª¥Â∫¶Ôºö‰ªòÊ¨æÊÉÖÂÜµ„ÄÅÁª≠Á∫¶ÊÑèÂêë„ÄÅÂ¢ûË¥≠ÊΩúÂäõ


            „Äê‰∫å„ÄÅÂÆö‰πâÊåáÊ†á‰∏éÊùÉÈáç„Äë

            ‰∏∫ÊØè‰∏™Áª¥Â∫¶ÁöÑÊåáÊ†áÂÆö‰πâÔºöÊåáÊ†áÂêçÁß∞‰∏éÂÆö‰πâ„ÄÅÊï∞ÊçÆÊù•Ê∫ê„ÄÅËÆ°ÁÆóÂÖ¨Âºè„ÄÅÊùÉÈáçÂàÜÈÖç„ÄÅÈááÈõÜÈ¢ëÁéá


            „Äê‰∏â„ÄÅËÆæÂÆöÈòàÂÄº‰∏éÁ≠âÁ∫ß„Äë

            - GREENÔºàÂÅ•Â∫∑ÔºâÔºö80-100ÂàÜ

            - YELLOWÔºàÂÖ≥Ê≥®ÔºâÔºö60-79ÂàÜ

            - REDÔºàÈ¢ÑË≠¶ÔºâÔºö0-59ÂàÜ


            ËØ∑ËæìÂá∫ÂåÖÂê´‰ª•‰∏ãÂ≠óÊÆµÁöÑJSONÊ†ºÂºèÔºö

            - productId: ‰∫ßÂìÅID

            - workflowTaskId: ‰ªªÂä°ID

            - usageDimension: ‰∫ßÂìÅ‰ΩøÁî®Áª¥Â∫¶ÂÆö‰πâÔºàJSONÂØπË±°Ôºâ

            - valueDimension: ‰∏öÂä°‰ª∑ÂÄºÁª¥Â∫¶ÂÆö‰πâÔºàJSONÂØπË±°Ôºâ

            - satisfactionDimension: ÂÆ¢Êà∑Êª°ÊÑèÂ∫¶Áª¥Â∫¶ÂÆö‰πâÔºàJSONÂØπË±°Ôºâ

            - relationshipDimension: ÂÖ≥Á≥ªÂÅ•Â∫∑Â∫¶Áª¥Â∫¶ÂÆö‰πâÔºàJSONÂØπË±°Ôºâ

            - commercialDimension: ÂïÜ‰∏öÂÅ•Â∫∑Â∫¶Áª¥Â∫¶ÂÆö‰πâÔºàJSONÂØπË±°Ôºâ

            - metricsDefinition: ÊåáÊ†áÂÆö‰πâÂàóË°®ÔºàÊï∞ÁªÑÔºâ

            - dimensionWeights: Áª¥Â∫¶ÊùÉÈáçÔºàJSONÂØπË±°Ôºâ

            - levelThresholds: Á≠âÁ∫ßÈòàÂÄºÔºàJSONÂØπË±°Ôºâ

            - metricThresholds: ÊåáÊ†áÈòàÂÄºÂàóË°®ÔºàÊï∞ÁªÑÔºâ

            '
        - id: eb15f57c-0d4f-4190-a313-6806144996ef
          role: user
          text: '‰ª•‰∏ãÊòØ‰∫ßÂìÅ‰ø°ÊÅØÔºö

            - ‰∫ßÂìÅÂêçÁß∞Ôºö{{#start.e_product_id_name#}}

            - ‰ºÅ‰∏öÂêçÁß∞Ôºö{{#start.e_company_name#}}

            - ‰ºÅ‰∏öÂπ¥Ëê•Êî∂ËßÑÊ®°Ôºö{{#start.e_company_revenue#}}ÂÖÉ

            - ‰∫ßÂìÅ‰∏ªË¶ÅÂäüËÉΩÔºö{{#start.e_product_id_detail#}}

            - ‰∫ßÂìÅIDÔºö{{#start.e_product_id#}}

            - ‰ªªÂä°IDÔºö{{#start.taskId#}}


            ËØ∑ËÆæËÆ°ËØ•‰∫ßÂìÅÁöÑÂÆ¢Êà∑ÂÅ•Â∫∑Â∫¶ÊåáÊ†á‰ΩìÁ≥ª„ÄÇ

            '
        selected: true
        structured_output:
          schema:
            additionalProperties: false
            properties:
              commercialDimension:
                additionalProperties: false
                properties:
                  dimensionId:
                    type: string
                  dimensionName:
                    type: string
                  subDimensions:
                    items:
                      additionalProperties: false
                      properties:
                        metrics:
                          items:
                            type: string
                          type: array
                        subDimensionId:
                          type: string
                        subDimensionName:
                          type: string
                        weight:
                          type: number
                      required:
                      - subDimensionId
                      - subDimensionName
                      - metrics
                      - weight
                      type: object
                    type: array
                  totalWeight:
                    type: number
                required:
                - dimensionId
                - dimensionName
                - subDimensions
                - totalWeight
                type: object
              dimensionWeights:
                additionalProperties: false
                properties:
                  commercialDimensionWeight:
                    type: number
                  relationshipDimensionWeight:
                    type: number
                  satisfactionDimensionWeight:
                    type: number
                  totalWeight:
                    type: number
                  usageDimensionWeight:
                    type: number
                  valueDimensionWeight:
                    type: number
                required:
                - usageDimensionWeight
                - valueDimensionWeight
                - satisfactionDimensionWeight
                - relationshipDimensionWeight
                - commercialDimensionWeight
                - totalWeight
                type: object
              levelThresholds:
                additionalProperties: false
                properties:
                  GREEN:
                    additionalProperties: false
                    properties:
                      description:
                        type: string
                      maxScore:
                        type: number
                      minScore:
                        type: number
                    required:
                    - minScore
                    - maxScore
                    - description
                    type: object
                  RED:
                    additionalProperties: false
                    properties:
                      description:
                        type: string
                      maxScore:
                        type: number
                      minScore:
                        type: number
                    required:
                    - minScore
                    - maxScore
                    - description
                    type: object
                  YELLOW:
                    additionalProperties: false
                    properties:
                      description:
                        type: string
                      maxScore:
                        type: number
                      minScore:
                        type: number
                    required:
                    - minScore
                    - maxScore
                    - description
                    type: object
                required:
                - GREEN
                - YELLOW
                - RED
                type: object
              metricThresholds:
                items:
                  additionalProperties: false
                  properties:
                    description:
                      type: string
                    excellentThreshold:
                      items:
                        type: number
                      type: array
                    goodThreshold:
                      items:
                        type: number
                      type: array
                    metricId:
                      type: string
                    metricName:
                      type: string
                    poorThreshold:
                      items:
                        type: number
                      type: array
                    thresholdType:
                      type: string
                  required:
                  - metricId
                  - metricName
                  - thresholdType
                  - excellentThreshold
                  - goodThreshold
                  - poorThreshold
                  - description
                  type: object
                type: array
              metricsDefinition:
                items:
                  additionalProperties: false
                  properties:
                    calculationLogic:
                      type: string
                    dataSource:
                      type: string
                    dimensionId:
                      type: string
                    metricId:
                      type: string
                    metricName:
                      type: string
                    subDimensionId:
                      type: string
                    unit:
                      type: string
                  required:
                  - metricId
                  - metricName
                  - dimensionId
                  - subDimensionId
                  - calculationLogic
                  - dataSource
                  - unit
                  type: object
                type: array
              productId:
                type: string
              relationshipDimension:
                additionalProperties: false
                properties:
                  dimensionId:
                    type: string
                  dimensionName:
                    type: string
                  subDimensions:
                    items:
                      additionalProperties: false
                      properties:
                        metrics:
                          items:
                            type: string
                          type: array
                        subDimensionId:
                          type: string
                        subDimensionName:
                          type: string
                        weight:
                          type: number
                      required:
                      - subDimensionId
                      - subDimensionName
                      - metrics
                      - weight
                      type: object
                    type: array
                  totalWeight:
                    type: number
                required:
                - dimensionId
                - dimensionName
                - subDimensions
                - totalWeight
                type: object
              satisfactionDimension:
                additionalProperties: false
                properties:
                  dimensionId:
                    type: string
                  dimensionName:
                    type: string
                  subDimensions:
                    items:
                      additionalProperties: false
                      properties:
                        metrics:
                          items:
                            type: string
                          type: array
                        subDimensionId:
                          type: string
                        subDimensionName:
                          type: string
                        weight:
                          type: number
                      required:
                      - subDimensionId
                      - subDimensionName
                      - metrics
                      - weight
                      type: object
                    type: array
                  totalWeight:
                    type: number
                required:
                - dimensionId
                - dimensionName
                - subDimensions
                - totalWeight
                type: object
              usageDimension:
                additionalProperties: false
                properties:
                  dimensionId:
                    type: string
                  dimensionName:
                    type: string
                  subDimensions:
                    items:
                      additionalProperties: false
                      properties:
                        metrics:
                          items:
                            type: string
                          type: array
                        subDimensionId:
                          type: string
                        subDimensionName:
                          type: string
                        weight:
                          type: number
                      required:
                      - subDimensionId
                      - subDimensionName
                      - metrics
                      - weight
                      type: object
                    type: array
                  totalWeight:
                    type: number
                required:
                - dimensionId
                - dimensionName
                - subDimensions
                - totalWeight
                type: object
              valueDimension:
                additionalProperties: false
                properties:
                  dimensionId:
                    type: string
                  dimensionName:
                    type: string
                  subDimensions:
                    items:
                      additionalProperties: false
                      properties:
                        metrics:
                          items:
                            type: string
                          type: array
                        subDimensionId:
                          type: string
                        subDimensionName:
                          type: string
                        weight:
                          type: number
                      required:
                      - subDimensionId
                      - subDimensionName
                      - metrics
                      - weight
                      type: object
                    type: array
                  totalWeight:
                    type: number
                required:
                - dimensionId
                - dimensionName
                - subDimensions
                - totalWeight
                type: object
              workflowTaskId:
                type: string
            required:
            - productId
            - workflowTaskId
            - usageDimension
            - valueDimension
            - satisfactionDimension
            - relationshipDimension
            - commercialDimension
            - metricsDefinition
            - dimensionWeights
            - levelThresholds
            - metricThresholds
            type: object
        structured_output_enabled: true
        title: LLM 2
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1765267713296'
      position:
        x: 358.92934969531495
        y: 282
      positionAbsolute:
        x: 358.92934969531495
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\ndef main(usageDimension: dict, valueDimension: dict, satisfactionDimension:\
          \ dict, relationshipDimension: dict, commercialDimension: dict, metricsDefinition:\
          \ list, dimensionWeights: dict, levelThresholds: dict, metricThresholds:\
          \ list) -> dict:\n    result = {\n        \"usageDimension\": \"\",\n  \
          \      \"valueDimension\": \"\",\n        \"satisfactionDimension\": \"\"\
          ,\n        \"relationshipDimension\": \"\",\n        \"commercialDimension\"\
          : \"\",\n        \"metricsDefinition\": \"\",\n        \"dimensionWeights\"\
          : \"\",\n        \"levelThresholds\": \"\",\n        \"metricThresholds\"\
          : \"\"\n    }\n    try:\n        json_str = json.dumps(usageDimension, ensure_ascii=False,\
          \ separators=(',', ':'))\n        result[\"usageDimension\"] = json.dumps(json_str,\
          \ ensure_ascii=False)\n\n        json_str = json.dumps(valueDimension, ensure_ascii=False,\
          \ separators=(',', ':'))\n        result[\"valueDimension\"] = json.dumps(json_str,\
          \ ensure_ascii=False)\n\n        json_str = json.dumps(satisfactionDimension,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"satisfactionDimension\"\
          ] = json.dumps(json_str, ensure_ascii=False)\n\n        json_str = json.dumps(relationshipDimension,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"relationshipDimension\"\
          ] = json.dumps(json_str, ensure_ascii=False)\n\n        json_str = json.dumps(commercialDimension,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"commercialDimension\"\
          ] = json.dumps(json_str, ensure_ascii=False)\n\n        json_str = json.dumps(metricsDefinition,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"metricsDefinition\"\
          ] = json.dumps(json_str, ensure_ascii=False)\n        \n        json_str\
          \ = json.dumps(dimensionWeights, ensure_ascii=False, separators=(',', ':'))\n\
          \        result[\"dimensionWeights\"] = json.dumps(json_str, ensure_ascii=False)\n\
          \        \n        json_str = json.dumps(levelThresholds, ensure_ascii=False,\
          \ separators=(',', ':'))\n        result[\"levelThresholds\"] = json.dumps(json_str,\
          \ ensure_ascii=False)\n        \n        json_str = json.dumps(metricThresholds,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"metricThresholds\"\
          ] = json.dumps(json_str, ensure_ascii=False)\n    except Exception as e:\n\
          \        pass\n    return result\n"
        code_language: python3
        outputs:
          commercialDimension:
            children: null
            type: string
          dimensionWeights:
            children: null
            type: string
          levelThresholds:
            children: null
            type: string
          metricThresholds:
            children: null
            type: string
          metricsDefinition:
            children: null
            type: string
          relationshipDimension:
            children: null
            type: string
          satisfactionDimension:
            children: null
            type: string
          usageDimension:
            children: null
            type: string
          valueDimension:
            children: null
            type: string
        selected: false
        title: ‰ª£Á†ÅÊâßË°å 2
        type: code
        variables:
        - value_selector:
          - '1765267713296'
          - structured_output
          - usageDimension
          value_type: object
          variable: usageDimension
        - value_selector:
          - '1765267713296'
          - structured_output
          - valueDimension
          value_type: object
          variable: valueDimension
        - value_selector:
          - '1765267713296'
          - structured_output
          - satisfactionDimension
          value_type: object
          variable: satisfactionDimension
        - value_selector:
          - '1765267713296'
          - structured_output
          - relationshipDimension
          value_type: object
          variable: relationshipDimension
        - value_selector:
          - '1765267713296'
          - structured_output
          - commercialDimension
          value_type: object
          variable: commercialDimension
        - value_selector:
          - '1765267713296'
          - structured_output
          - metricsDefinition
          value_type: object
          variable: metricsDefinition
        - value_selector:
          - '1765267713296'
          - structured_output
          - dimensionWeights
          value_type: object
          variable: dimensionWeights
        - value_selector:
          - '1765267713296'
          - structured_output
          - levelThresholds
          value_type: object
          variable: levelThresholds
        - value_selector:
          - '1765267713296'
          - structured_output
          - metricThresholds
          value_type: object
          variable: metricThresholds
      height: 52
      id: '1765268495197'
      position:
        x: 660.929349695315
        y: 282
      positionAbsolute:
        x: 660.929349695315
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 261.65503614540194
      y: 207.8281836932324
      zoom: 0.757858283255199
  rag_pipeline_variables: []
