app:
  description: MQLÂà§ÂÆöÊ†áÂáÜÂà∂ÂÆö
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: workflow
  name: 8.0.1MQLÂà§ÂÆöÊ†áÂáÜÂà∂ÂÆö
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.3@08f25a10c0617a3512fac091a0f0d894925357e965efe40fdf95cb48e09b62d1
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: start
        targetType: llm
      id: edge-start-to-llm
      source: start
      sourceHandle: source
      target: llm-mql-criteria
      targetHandle: target
      type: custom
    - data:
        sourceType: llm
        targetType: code
      id: edge-llm-to-code
      source: llm-mql-criteria
      sourceHandle: source
      target: code-json
      targetHandle: target
      type: custom
    - data:
        sourceType: code
        targetType: http-request
      id: edge-code-to-http
      source: code-json
      sourceHandle: source
      target: http-save
      targetHandle: target
      type: custom
    - data:
        sourceType: http-request
        targetType: end
      id: edge-http-to-end
      source: http-save
      sourceHandle: source
      target: end
      targetHandle: target
      type: custom
    nodes:
    - data:
        desc: ËæìÂÖ•‰∫ßÂìÅÂíå‰ºÅ‰∏ö‰ø°ÊÅØ
        selected: false
        title: ÂºÄÂßã
        type: start
        variables:
        - label: ‰∫ßÂìÅÂêç
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_product_id_name
        - label: ‰∫ßÂìÅÁÆÄ‰ªã
          max_length: 256
          options: []
          required: true
          type: paragraph
          variable: e_product_id_detail
        - label: ‰∫ßÂìÅÂ∫èÂè∑
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_product_id
        - label: ‰ºÅ‰∏öÂêç
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_name
        - label: ‰ºÅ‰∏öÂπ¥Êî∂ÂÖ•
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: e_company_revenue
        - label: Áî®Êà∑id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_id
        - label: ÁßüÊà∑id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: tenant_id
        - label: ‰ªªÂä°id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: taskId
      height: 298
      id: start
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: MQLÂà§ÂÆöÊ†áÂáÜÂà∂ÂÆöÂàÜÊûê
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen3-max
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: prompt-system
          role: system
          text: 'ËØ∑‰Ω†‰Ωú‰∏∫‰∏ÄÂêç‰∏ì‰∏öÁöÑËê•ÈîÄËøêËê•‰∏ìÂÆ∂ÔºåÊàë‰ºöÂêë‰Ω†Êèê‰æõ‰ºÅ‰∏öÁöÑ‰∫ßÂìÅÂíå‰∏öÂä°‰ø°ÊÅØ„ÄÇËØ∑‰Ω†‰∏∫ËØ•‰ºÅ‰∏öÂà∂ÂÆöËØ¶ÁªÜÁöÑMQLÂà§ÂÆöÊ†áÂáÜÂíåËØÑÂàÜÊ®°ÂûãÔºåÁ°Æ‰øùËÉΩÂ§üÂáÜÁ°ÆËØÜÂà´È´òË¥®ÈáèÁöÑËê•ÈîÄÁ∫øÁ¥¢„ÄÇ


            ËØ∑‰∏•Ê†ºÊåâÁÖßJSON SchemaËæìÂá∫ÂàÜÊûêÁªìÊûúÔºåÂøÖÈ°ªÂåÖÂê´‰ª•‰∏ãÂ≠óÊÆµÔºö

            - productId: ‰∫ßÂìÅIDÔºàÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºâ

            - workflowTaskId: Â∑•‰ΩúÊµÅ‰ªªÂä°IDÔºàÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºâ

            - targetIndustries: ÁõÆÊ†áË°å‰∏öÂàóË°®ÔºàÊï∞ÁªÑÁ±ªÂûãÔºâ

            - companySizeCriteria: ‰ºÅ‰∏öËßÑÊ®°Ê†áÂáÜÔºàÂØπË±°Á±ªÂûãÔºâ

            - decisionMakerLevels: ÂÜ≥Á≠ñËÄÖÁ∫ßÂà´ÔºàÊï∞ÁªÑÁ±ªÂûãÔºâ

            - geographicCriteria: Âú∞ÁêÜ‰ΩçÁΩÆÊ†áÂáÜÔºàÂØπË±°Á±ªÂûãÔºâ

            - websiteBehaviorWeights: ÁΩëÁ´ôË°å‰∏∫ÊùÉÈáçÔºàÂØπË±°Á±ªÂûãÔºâ

            - contentInteractionWeights: ÂÜÖÂÆπ‰∫íÂä®ÊùÉÈáçÔºàÂØπË±°Á±ªÂûãÔºâ

            - emailInteractionWeights: ÈÇÆ‰ª∂‰∫íÂä®ÊùÉÈáçÔºàÂØπË±°Á±ªÂûãÔºâ

            - eventParticipationWeights: Ê¥ªÂä®ÂèÇ‰∏éÊùÉÈáçÔºàÂØπË±°Á±ªÂûãÔºâ

            - socialInteractionWeights: Á§æ‰∫§‰∫íÂä®ÊùÉÈáçÔºàÂØπË±°Á±ªÂûãÔºâ

            - highIntentSignals: È´òÊÑèÂêë‰ø°Âè∑ÔºàÊï∞ÁªÑÁ±ªÂûãÔºâ

            - mediumIntentSignals: ‰∏≠ÊÑèÂêë‰ø°Âè∑ÔºàÊï∞ÁªÑÁ±ªÂûãÔºâ

            - lowIntentSignals: ‰ΩéÊÑèÂêë‰ø°Âè∑ÔºàÊï∞ÁªÑÁ±ªÂûãÔºâ

            - agentMqlQualifiedThreshold: MQLÂêàÊ†ºÈòàÂÄºÔºàÊï∞Â≠óÁ±ªÂûãÔºâ

            - priorityFollowupThreshold: ‰ºòÂÖàË∑üËøõÈòàÂÄºÔºàÊï∞Â≠óÁ±ªÂûãÔºâ

            - nurturingThreshold: ÂüπËÇ≤ÈòàÂÄºÔºàÊï∞Â≠óÁ±ªÂûãÔºâ

            '
        - id: prompt-user
          role: user
          text: '‰ª•‰∏ãÊòØ‰ºÅ‰∏öÂíå‰∫ßÂìÅ‰ø°ÊÅØÔºö

            - ‰∫ßÂìÅÂêçÁß∞Ôºö{{#start.e_product_id_name#}}

            - ‰ºÅ‰∏öÂêçÁß∞Ôºö{{#start.e_company_name#}}

            - ‰ºÅ‰∏öÂπ¥Ëê•Êî∂ËßÑÊ®°Ôºö{{#start.e_company_revenue#}}ÂÖÉ

            - ‰∫ßÂìÅ‰∏ªË¶ÅÂäüËÉΩÔºö{{#start.e_product_id_detail#}}

            - ‰∫ßÂìÅIDÔºö{{#start.e_product_id#}}

            - Â∑•‰ΩúÊµÅ‰ªªÂä°IDÔºö{{#start.taskId#}}


            ËØ∑‰∏∫ËØ•‰ºÅ‰∏öÂà∂ÂÆöMQLÂà§ÂÆöÊ†áÂáÜÂíåËØÑÂàÜÊ®°ÂûãÔºåÂπ∂Âú®ËæìÂá∫‰∏≠ÂåÖÂê´‰∫ßÂìÅIDÂíåÂ∑•‰ΩúÊµÅ‰ªªÂä°ID„ÄÇ

            '
        selected: false
        structured_output:
          schema:
            properties:
              agentMqlQualifiedThreshold:
                description: MQLÂêàÊ†ºÈòàÂÄº
                type: number
              companySizeCriteria:
                description: ‰ºÅ‰∏öËßÑÊ®°Ê†áÂáÜ
                type: object
              contentInteractionWeights:
                description: ÂÜÖÂÆπ‰∫íÂä®ÊùÉÈáç
                type: object
              decisionMakerLevels:
                description: ÂÜ≥Á≠ñËÄÖÁ∫ßÂà´
                items:
                  type: string
                type: array
              emailInteractionWeights:
                description: ÈÇÆ‰ª∂‰∫íÂä®ÊùÉÈáç
                type: object
              eventParticipationWeights:
                description: Ê¥ªÂä®ÂèÇ‰∏éÊùÉÈáç
                type: object
              geographicCriteria:
                description: Âú∞ÁêÜ‰ΩçÁΩÆÊ†áÂáÜ
                type: object
              highIntentSignals:
                description: È´òÊÑèÂêë‰ø°Âè∑
                items:
                  type: string
                type: array
              lowIntentSignals:
                description: ‰ΩéÊÑèÂêë‰ø°Âè∑
                items:
                  type: string
                type: array
              mediumIntentSignals:
                description: ‰∏≠ÊÑèÂêë‰ø°Âè∑
                items:
                  type: string
                type: array
              nurturingThreshold:
                description: ÂüπËÇ≤ÈòàÂÄº
                type: number
              priorityFollowupThreshold:
                description: ‰ºòÂÖàË∑üËøõÈòàÂÄº
                type: number
              productId:
                description: ‰∫ßÂìÅID
                type: string
              socialInteractionWeights:
                description: Á§æ‰∫§‰∫íÂä®ÊùÉÈáç
                type: object
              targetIndustries:
                description: ÁõÆÊ†áË°å‰∏öÂàóË°®
                items:
                  type: string
                type: array
              websiteBehaviorWeights:
                description: ÁΩëÁ´ôË°å‰∏∫ÊùÉÈáç
                type: object
              workflowTaskId:
                description: Â∑•‰ΩúÊµÅ‰ªªÂä°ID
                type: string
            required:
            - productId
            - workflowTaskId
            - targetIndustries
            - companySizeCriteria
            - decisionMakerLevels
            - geographicCriteria
            - websiteBehaviorWeights
            - contentInteractionWeights
            - emailInteractionWeights
            - eventParticipationWeights
            - socialInteractionWeights
            - highIntentSignals
            - mediumIntentSignals
            - lowIntentSignals
            - agentMqlQualifiedThreshold
            - priorityFollowupThreshold
            - nurturingThreshold
            type: object
        structured_output_enabled: true
        title: MQLÂà§ÂÆöÊ†áÂáÜÂà∂ÂÆö
        type: llm
        variables: []
        vision:
          enabled: false
      height: 116
      id: llm-mql-criteria
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        code: "import json\ndef main(targetIndustries: list, companySizeCriteria:\
          \ dict, decisionMakerLevels: list, geographicCriteria: dict, websiteBehaviorWeights:\
          \ dict, contentInteractionWeights: dict, emailInteractionWeights: dict,\
          \ eventParticipationWeights: dict, socialInteractionWeights: dict, highIntentSignals:\
          \ list, mediumIntentSignals: list, lowIntentSignals: list) -> dict:\n  \
          \  result = {}\n    try:\n        result[\"targetIndustries\"] = json.dumps(targetIndustries,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"companySizeCriteria\"\
          ] = json.dumps(companySizeCriteria, ensure_ascii=False, separators=(',',\
          \ ':'))\n        result[\"decisionMakerLevels\"] = json.dumps(decisionMakerLevels,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"geographicCriteria\"\
          ] = json.dumps(geographicCriteria, ensure_ascii=False, separators=(',',\
          \ ':'))\n        result[\"websiteBehaviorWeights\"] = json.dumps(websiteBehaviorWeights,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"contentInteractionWeights\"\
          ] = json.dumps(contentInteractionWeights, ensure_ascii=False, separators=(',',\
          \ ':'))\n        result[\"emailInteractionWeights\"] = json.dumps(emailInteractionWeights,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"eventParticipationWeights\"\
          ] = json.dumps(eventParticipationWeights, ensure_ascii=False, separators=(',',\
          \ ':'))\n        result[\"socialInteractionWeights\"] = json.dumps(socialInteractionWeights,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"highIntentSignals\"\
          ] = json.dumps(highIntentSignals, ensure_ascii=False, separators=(',', ':'))\n\
          \        result[\"mediumIntentSignals\"] = json.dumps(mediumIntentSignals,\
          \ ensure_ascii=False, separators=(',', ':'))\n        result[\"lowIntentSignals\"\
          ] = json.dumps(lowIntentSignals, ensure_ascii=False, separators=(',', ':'))\n\
          \    except Exception as e:\n        pass\n    return result\n"
        code_language: python3
        desc: Â∞ÜÂ§çÊùÇÂ≠óÊÆµËΩ¨‰∏∫JSONÂ≠óÁ¨¶‰∏≤
        outputs:
          companySizeCriteria:
            children: null
            type: string
          contentInteractionWeights:
            children: null
            type: string
          decisionMakerLevels:
            children: null
            type: string
          emailInteractionWeights:
            children: null
            type: string
          eventParticipationWeights:
            children: null
            type: string
          geographicCriteria:
            children: null
            type: string
          highIntentSignals:
            children: null
            type: string
          lowIntentSignals:
            children: null
            type: string
          mediumIntentSignals:
            children: null
            type: string
          socialInteractionWeights:
            children: null
            type: string
          targetIndustries:
            children: null
            type: string
          websiteBehaviorWeights:
            children: null
            type: string
        selected: false
        title: ËΩ¨JSON
        type: code
        variables:
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - targetIndustries
          value_type: array[string]
          variable: targetIndustries
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - companySizeCriteria
          value_type: object
          variable: companySizeCriteria
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - decisionMakerLevels
          value_type: array[string]
          variable: decisionMakerLevels
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - geographicCriteria
          value_type: object
          variable: geographicCriteria
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - websiteBehaviorWeights
          value_type: object
          variable: websiteBehaviorWeights
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - contentInteractionWeights
          value_type: object
          variable: contentInteractionWeights
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - emailInteractionWeights
          value_type: object
          variable: emailInteractionWeights
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - eventParticipationWeights
          value_type: object
          variable: eventParticipationWeights
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - socialInteractionWeights
          value_type: object
          variable: socialInteractionWeights
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - highIntentSignals
          value_type: array[string]
          variable: highIntentSignals
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - mediumIntentSignals
          value_type: array[string]
          variable: mediumIntentSignals
        - value_selector:
          - llm-mql-criteria
          - structured_output
          - lowIntentSignals
          value_type: array[string]
          variable: lowIntentSignals
      height: 80
      id: code-json
      position:
        x: 536
        y: 282
      positionAbsolute:
        x: 536
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        authorization:
          type: no-auth
        body:
          data:
          - id: key-value-1
            key: ''
            type: text
            value: "{\n  \"productId\":\"{{#start.e_product_id#}}\",\n  \"workflowTaskId\"\
              :\"{{#start.taskId#}}\",\n  \"targetIndustries\":{{#code-json.targetIndustries#}},\n\
              \  \"companySizeCriteria\":{{#code-json.companySizeCriteria#}},\n  \"\
              decisionMakerLevels\":{{#code-json.decisionMakerLevels#}},\n  \"geographicCriteria\"\
              :{{#code-json.geographicCriteria#}},\n  \"websiteBehaviorWeights\":{{#code-json.websiteBehaviorWeights#}},\n\
              \  \"contentInteractionWeights\":{{#code-json.contentInteractionWeights#}},\n\
              \  \"emailInteractionWeights\":{{#code-json.emailInteractionWeights#}},\n\
              \  \"eventParticipationWeights\":{{#code-json.eventParticipationWeights#}},\n\
              \  \"socialInteractionWeights\":{{#code-json.socialInteractionWeights#}},\n\
              \  \"highIntentSignals\":{{#code-json.highIntentSignals#}},\n  \"mediumIntentSignals\"\
              :{{#code-json.mediumIntentSignals#}},\n  \"lowIntentSignals\":{{#code-json.lowIntentSignals#}},\n\
              \  \"agentMqlQualifiedThreshold\":{{#llm-mql-criteria.structured_output.agentMqlQualifiedThreshold#}},\n\
              \  \"priorityFollowupThreshold\":{{#llm-mql-criteria.structured_output.priorityFollowupThreshold#}},\n\
              \  \"nurturingThreshold\":{{#llm-mql-criteria.structured_output.nurturingThreshold#}}\n\
              }"
          type: json
        desc: ‰øùÂ≠òMQLÂà§ÂÆöÊ†áÂáÜÁªìÊûúÂà∞ÂêéÁ´Ø
        headers: 'Authorization:test{{#start.user_id#}}


          tenant-id:{{#start.tenant_id#}}'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          connect: 10
          read: 60
          write: 60
        title: ‰øùÂ≠òÂà∞ÂêéÁ´Ø
        type: http-request
        url: https://agent.cstlanbaai.com/gateway/admin-api/scrm/mql-standard-definition/create
      height: 198
      id: http-save
      position:
        x: 840
        y: 282
      positionAbsolute:
        x: 840
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        desc: ËæìÂá∫ÁªìÊûú
        outputs:
        - value_selector:
          - llm-mql-criteria
          - structured_output
          variable: mql_criteria_result
        selected: false
        title: ÁªìÊùü
        type: end
      height: 116
      id: end
      position:
        x: 1100
        y: 282
      positionAbsolute:
        x: 1100
        y: 282
      selected: false
      type: custom
      width: 242
    viewport:
      x: 0
      y: 0
      zoom: 1
  rag_pipeline_variables: []
