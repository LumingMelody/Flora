app:
  description: æ€»ä½“æˆ˜ç•¥-å¸‚åœºæ´å¯Ÿ
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: 6.0.0å¸‚åœºæ´å¯Ÿ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.3@08f25a10c0617a3512fac091a0f0d894925357e965efe40fdf95cb48e09b62d1
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: end
      id: 1764914860084-source-end-target
      source: '1764914860084'
      sourceHandle: source
      target: end
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-source-1764923041804-target
      source: start
      sourceHandle: source
      target: '1764923041804'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1764923041804-source-1764926779393-target
      source: '1764923041804'
      sourceHandle: source
      target: '1764926779393'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1764926779393-source-1764914860084-target
      source: '1764926779393'
      sourceHandle: source
      target: '1764914860084'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1764923041804-source-1764927571131-target
      source: '1764923041804'
      sourceHandle: source
      target: '1764927571131'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1764927571131-source-1764914860084-target
      source: '1764927571131'
      sourceHandle: source
      target: '1764914860084'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: è¾“å…¥äº§å“å’Œä¼ä¸šä¿¡æ¯
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: äº§å“å
          max_length: 48
          options: []
          required: true
          type: paragraph
          variable: e_product_id_name
        - label: äº§å“ç®€ä»‹
          max_length: 256
          options: []
          required: true
          type: paragraph
          variable: e_product_id_detail
        - label: äº§å“åºå·
          max_length: 48
          options: []
          required: true
          type: paragraph
          variable: e_product_id
        - label: ä¼ä¸šå
          max_length: 48
          options: []
          required: true
          type: paragraph
          variable: e_company_name
        - label: ä¼ä¸šå¹´æ”¶å…¥
          max_length: 48
          options: []
          required: true
          type: paragraph
          variable: e_company_revenue
        - label: ç”¨æˆ·id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_id
        - label: ç§Ÿæˆ·id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: tenant_id
        - label: ä»»åŠ¡id
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: taskId
      height: 298
      id: start
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        desc: è¾“å‡ºç»“æœ
        outputs:
        - value_selector:
          - '1764914860084'
          - body
          value_type: string
          variable: market_insight_result
        - value_selector:
          - sys
          - workflow_id
          value_type: string
          variable: workflow_id
        selected: false
        title: ç»“æŸ
        type: end
      height: 142
      id: end
      position:
        x: 1398.4824371879145
        y: 282
      positionAbsolute:
        x: 1398.4824371879145
        y: 282
      selected: false
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-144
            key: ''
            type: text
            value: "{\n  \"productId\":\"{{#start.e_product_id#}}\",\n  \"workflowTaskId\"\
              :\"{{#sys.workflow_id#}}\",\n  \"insightContent\":\"{{#1764926779393.content#}}\"\
              ,\n \"industryAnalysis\":\"{{#1764923041804.structured_output.industryAnalysis#}}\"\
              ,\n  \"marketSizeAnalysis\":\"{{#1764923041804.structured_output.marketSizeAnalysis#}}\"\
              ,\n  \"growthTrendAnalysis\":\"{{#1764923041804.structured_output.growthTrendAnalysis#}}\"\
              ,\n  \"swotAnalysis\":\"{{#1764926779393.content#}}\",\n  \"porterFiveForces\"\
              :\"{{#1764927571131.content#}}\"\n}"
          type: json
        headers: 'Authorization:test{{#start.user_id#}}

          tenant-id:{{#start.tenant_id#}}'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚
        type: http-request
        url: https://agent.cstlanbaai.com/gateway/admin-api/scrm/pma-market-insight/create
        variables: []
      height: 170
      id: '1764914860084'
      position:
        x: 1058.1180894082768
        y: 282
      positionAbsolute:
        x: 1058.1180894082768
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-v3
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: c43d1261-5441-4eb1-beec-a67fefb5888d
          role: system
          text: "è¯·ä½ ä½œä¸ºä¸€åä¸“ä¸šçš„å®è§‚ç»æµåˆ†æå¸ˆï¼Œæˆ‘ä¼šå‘ä½ æä¾›ä¸€äº›ä¼ä¸šçš„åŸºæœ¬æƒ…å†µå’Œç»è¥æ•°æ®ï¼Œè¯·ä½ ç»“åˆå½“å‰çš„ç»æµç¯å¢ƒï¼Œä»å®è§‚è§’åº¦å‡ºå‘ï¼Œå¯¹è¯¥ä¼ä¸šæ‰€å¤„åœ¨çš„è¡Œä¸šçš„æ™¯æ°”ç¨‹åº¦è¿›è¡Œåˆ†æï¼Œå¹¶åˆ—ä¸¾å‡ºç›®å‰è¯¥è¡Œä¸šå†…æœ‰å“ªäº›å‘å±•è¶‹åŠ¿ï¼Œè¡Œä¸šé‡Œç›®å‰æœ‰å“ªäº›èµ›é“ï¼Œèµ›é“é‡Œæœ‰å“ªäº›äº§å“ï¼Œå¯¹è¯¥ä¼ä¸šåœ¨æ•´ä¸ªè¡Œä¸šé‡Œçš„æƒ…å†µåšSWOTåˆ†æå’Œæ³¢ç‰¹äº”åŠ›åˆ†æã€‚\n\
            \nè¯·ä»¥JSONæ ¼å¼è¾“å‡ºåˆ†æç»“æœï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n{\n    \"industryAnalysis\": \"è¡Œä¸šæ™¯æ°”åº¦åˆ†æ\",\n\
            \    \"marketSizeAnalysis\": \"å¸‚åœºè§„æ¨¡åˆ†æï¼ˆåŒ…å«è§„æ¨¡æ•°æ®å’Œå¢é•¿ç‡ï¼‰\",\n    \"growthTrendAnalysis\"\
            : \"å‘å±•è¶‹åŠ¿1, å‘å±•è¶‹åŠ¿2\",\n    \"swotAnalysis\": {\n      \\\"strengths\\\"\
            : [\\\"ä¼˜åŠ¿1\\\"],\n      \\\"weaknesses\\\": [\\\"åŠ£åŠ¿1\\\"],\n      \\\"\
            opportunities\\\": [\\\"æœºä¼š1\\\"],\n      \\\"threats\\\": [\\\"å¨èƒ1\\\"\
            ]\n    },\n    \"porterFiveForces\": {\n      \"supplierPower\": \"ä¾›åº”å•†è®®ä»·èƒ½åŠ›åˆ†æ\"\
            ,\n      \"buyerPower\": \"è´­ä¹°è€…è®®ä»·èƒ½åŠ›åˆ†æ\",\n      \"competitiveRivalry\"\
            : \"ç°æœ‰ç«äº‰è€…åˆ†æ\",\n      \"threatOfSubstitution\": \"æ›¿ä»£å“å¨èƒåˆ†æ\",\n      \"\
            threatOfNewEntry\": \"æ–°è¿›å…¥è€…å¨èƒåˆ†æ\"\n    }\n}\n"
        - id: 9fc2bbed-b6f1-4cca-ac92-98f5420b5971
          role: user
          text: 'ä»¥ä¸‹æ˜¯ä¼ä¸šå’Œäº§å“ä¿¡æ¯ï¼š

            - äº§å“åç§°ï¼š{{#start.e_product_id_name#}}

            - ä¼ä¸šåç§°ï¼š{{#start.e_company_name#}}

            - ä¼ä¸šå¹´è¥æ”¶è§„æ¨¡ï¼š{{#start.e_company_revenue#}}å…ƒ

            - äº§å“ä¸»è¦åŠŸèƒ½ï¼š{{#start.e_product_id_detail#}}


            è¯·å¯¹è¯¥ä¼ä¸šè¿›è¡Œå¸‚åœºæ´å¯Ÿåˆ†æã€‚

            '
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              growthTrendAnalysis:
                type: string
              industryAnalysis:
                type: string
              marketSizeAnalysis:
                type: string
              porterFiveForces:
                additionalProperties: false
                properties:
                  buyerPower:
                    type: string
                  competitiveRivalry:
                    type: string
                  supplierPower:
                    type: string
                  threatOfNewEntry:
                    type: string
                  threatOfSubstitution:
                    type: string
                required:
                - supplierPower
                - buyerPower
                - competitiveRivalry
                - threatOfSubstitution
                - threatOfNewEntry
                type: object
              swotAnalysis:
                additionalProperties: false
                type: string
            required:
            - industryAnalysis
            - marketSizeAnalysis
            - growthTrendAnalysis
            - swotAnalysis
            - porterFiveForces
            type: object
        structured_output_enabled: true
        title: å¸‚åœºæ´å¯Ÿ
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1764923041804'
      position:
        x: 414.6973265659093
        y: 282
      positionAbsolute:
        x: 414.6973265659093
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    result = {\"content\"\
          : \"\"}\n    try:\n        data = arg1\n        # ç¬¬ä¸€æ¬¡è½¬ä¹‰ï¼šå°†Pythonå¯¹è±¡è½¬ä¸ºæ ‡å‡†JSONå­—ç¬¦ä¸²\n\
          \        json_str = json.dumps(data, ensure_ascii=False, separators=(',',\
          \ ':'))\n        # ç¬¬äºŒæ¬¡è½¬ä¹‰ï¼šç¡®ä¿æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½è¢«æ­£ç¡®è½¬ä¹‰\n        json_str = json.dumps(json_str,\
          \ ensure_ascii=False)\n        result[\"content\"] = json_str\n\n    except\
          \ Exception as e:\n        # å¼‚å¸¸æ—¶ä»èƒ½æ­£å¸¸è®¿é—®result\n        result[\"content\"\
          ] = f\"å¤„ç†å¤±è´¥: {str(e)}\"\n\n    return result"
        code_language: python3
        outputs:
          content:
            children: null
            type: string
        selected: true
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables:
        - value_selector:
          - '1764923041804'
          - structured_output
          - swotAnalysis
          value_type: object
          variable: arg1
      height: 52
      id: '1764926779393'
      position:
        x: 758.1180894082768
        y: 282
      positionAbsolute:
        x: 758.1180894082768
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    result = {\"content\"\
          : \"\"}\n    try:\n        data = arg1\n        # ç¬¬ä¸€æ¬¡è½¬ä¹‰ï¼šå°†Pythonå¯¹è±¡è½¬ä¸ºæ ‡å‡†JSONå­—ç¬¦ä¸²\n\
          \        json_str = json.dumps(data, ensure_ascii=False, separators=(',',\
          \ ':'))\n        # ç¬¬äºŒæ¬¡è½¬ä¹‰ï¼šç¡®ä¿æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½è¢«æ­£ç¡®è½¬ä¹‰\n        json_str = json.dumps(json_str,\
          \ ensure_ascii=False)\n        result[\"content\"] = json_str\n\n    except\
          \ Exception as e:\n        # å¼‚å¸¸æ—¶ä»èƒ½æ­£å¸¸è®¿é—®result\n        result[\"content\"\
          ] = f\"å¤„ç†å¤±è´¥: {str(e)}\"\n\n    return result"
        code_language: python3
        outputs:
          content:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 2
        type: code
        variables:
        - value_selector:
          - '1764923041804'
          - structured_output
          - porterFiveForces
          value_type: object
          variable: arg1
      height: 52
      id: '1764927571131'
      position:
        x: 758.1180894082768
        y: 373
      positionAbsolute:
        x: 758.1180894082768
        y: 373
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 17.09591172015098
      y: 68.9049572942954
      zoom: 0.8362463999140644
  rag_pipeline_variables: []
